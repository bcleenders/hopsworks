<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"      
      >

   <h:head>
      <title>Test Page</title>
      <link rel="stylesheet" type="text/css" href="#{resource['/css/layout.css']}" />

   </h:head>

   <script>
      jQuery(document).ready(function() {
         $('.Role-filter').val('#{testController.role}');                      
         $('.Status-filter').val('#{testController.status}'); 
      });
   </script>

   <h:body>
      <p title="Test page">This is a test page</p>
      
      <h:form>
         <p:commandButton actionListener="#{testController.test()}" ajax="true"/>         
      </h:form>

      
      

      <h:form styleClass="styleInfoPanel" id="formInstances">
         <p:panel id="panelInstances" header="Roles">
            <p:dataTable id="instances" var="instance" value="#{testController.roles}"
                         filteredValue="#{testController.filteredInstances}" >

               <p:column id="Name" headerText="Role" filterBy="#{instance.role}" filterMatchMode="contains" 
                         filterOptions="#{testController.roleOptions}" filterPosition="top"
                         filterStyleClass="Role-filter">

                  <p:commandLink action="#{urlController.roleStatus}" ajax="false">
                     <h:outputText value="#{instance.role}"/>
                     <f:param name="hostid" value="cloud1.sics.se"/>
                     <f:param name="cluster" value="cluster1"/>
                     <f:param name="role" value="namenode"/>
                     <f:param name="service" value="KTHFS}"/>
                  </p:commandLink>                     
               </p:column>

               <p:column id="Status1" headerText="Status" filterBy="#{instance.status}" 
                         filterMatchMode="exact" filterOptions="#{testController.statusOptions}" filterPosition="top">
                  <h:outputText id="status" value="#{instance.status}"/>
               </p:column>                  
            </p:dataTable> 
         </p:panel>                    
      </h:form>

   </h:body>

</html>


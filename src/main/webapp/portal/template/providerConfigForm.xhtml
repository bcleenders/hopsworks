<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:pe="http://primefaces.org/ui/extensions">
    <h:body>
        <ui:composition>
            <pe:tooltip global="true" showEvent="focus" myPosition="left center" atPosition="right center" />  
            <div id="providerConfigForm" >

                <br/>
                <h:panelGroup id="msg1">
                    <p:messages id="msgs"/>
                    <p:messages severity="warn" showDetail="true"/>
                    <p:growl for="success" showDetail="true" sticky="true" />
                </h:panelGroup>
                <h:form id="providerForm" rendered="#{portalMB.showProvider}">                                    
                    <p:panel id="dashboardCredentials" header="Dashboard Credentials" >
                        <h:panelGrid columns="2">
                            <p:outputLabel for="providerName" value="Provider" />
                            <h:outputText id="providerName" value="#{portalMB.providerName}"/>
                            <p:outputLabel for="dashboardUsername" value="Username"/>
                            <p:watermark for="dashboardUsername" value="Username for dashboard user">
                                <p:inputText id="dashboardUsername" value="#{portalMB.dashboardUsername}"
                                             title="Enter a username for admin account for Dashboard"
                                             label="Missing Dashboard username"
                                             size="30" required="true" />
                            </p:watermark>

                            <p:outputLabel for="dashboardPassword" value="Password" />
                            <p:watermark for="dashboardPassword" value="Password for dashboard user">
                                <p:password id="dashboardPassword" value="#{portalMB.dashboardPassword}" size="30"
                                            required="true" title="Enter a password for admin account for Dashboard"
                                            label="Missing Dashboard password"/>
                            </p:watermark>
                        </h:panelGrid>
                    </p:panel>

                    <br/>
                    <p:panel id="providerCredentials" header="Provider Login Credentials" 
                             rendered="#{!portalMB.baremetal}">
                        <h:panelGrid columns="2">
                            <p:outputLabel for="id" value="id"/>
                            <p:watermark for="id" value="#{portalMB.openstack
                                                           ?'OpenStack ProjectName:UserName'
                                                           :'Access Key Id from AWS'}">
                                <p:inputText id="id" value="#{portalMB.id}" 
                                             size="30" required="true" 
                                             disabled="false"
                                             title="#{portalMB.openstack
                                                      ?'Enter you login id for OpenStack'
                                                      :'Enter your login id for AWS'}"
                                             label="#{portalMB.openstack
                                                      ?'Missing login id for OpenStack'
                                                      :'Missing login id for AWS'}"/>
                            </p:watermark>

                            <h:outputLabel for="key" value="Secret Key"/>
                            <p:watermark for="key" value="#{portalMB.openstack
                                                            ?'user password'
                                                            :'Secret Access Key for AWS'}" >
                                <p:password id="key" value="#{portalMB.key}" 
                                            size="30"
                                            required="true" 
                                            disabled="false"
                                             title="#{portalMB.openstack
                                                      ?'Enter you access key for OpenStack'
                                                      :'Enter your access key for AWS'}"
                                             label="#{portalMB.openstack
                                                      ?'Missing access key for OpenStack'
                                                      :'Missing access key for AWS'}"/>
                            </p:watermark>

                            <p:outputLabel for="keystone" value="Keystone url" 
                                           rendered="#{portalMB.openstack}"/>
                            <p:watermark for="keystone" value="keystone url of the service point" >
                                <p:password id="keystone" value="#{portalMB.keystone}" 
                                            size="30" 
                                            disabled="#{!portalMB.openstack}"
                                            rendered="#{portalMB.openstack}"
                                            title="Enter the URL for your OpenStack nova endpoint"
                                            label="Missing OpenStack nova endpoint URL"/>
                            </p:watermark>
                        </h:panelGrid>
                    </p:panel> 
                    <p:panel id="SSHCredentials" header="SSH Credentials" 
                             rendered="#{portalMB.baremetal}">
                        <h:panelGrid columns="2">
                            <p:outputLabel for="host" value="host" />
                            <p:watermark for="host" value="Machine IP or Hostname">
                                <p:inputText id="host" value="#{portalMB.host}" 
                                             size="30" required="true" 
                                             disabled="false"
                                             title="Enter Host address of the machine to connect"
                                             label="Missing Host address to connect to"
                                             />
                            </p:watermark>
                            <p:outputLabel for="authorizePrivateKey" value="Private Key"/>
                            <p:inputTextarea id="authorizePrivateKey" value="#{portalMB.privateKey}" 
                                             cols="30" rows="11" required="true"
                                             title="Enter Private key to connect to the Physical Machine"
                                             label="Missing Private key"/>
                        </h:panelGrid>
                    </p:panel>
                    <br/>
                    <p:panel id="instanceConfigurationParameters" header="Instance Parameters (Overridable)" 
                             toggleable="true" collapsed="true">
                        <h:panelGrid columns ="2">
                            <p:outputLabel for="groupName" value="Security Group Name"
                                           rendered="#{!portalMB.baremetal}"/>
                            <p:watermark for="groupName" value="Security Group:" 
                                         rendered="#{!portalMB.baremetal}">
                                <p:inputText id="groupName" value="#{portalMB.groupName}" size="30" 
                                             rendered="#{!portalMB.baremetal}"
                                             required="#{!portalMB.baremetal}" 
                                             title="Enter a Security group to allocate Dashboard"
                                             label="Missing Security group for dashboard"/>
                            </p:watermark>
                            <p:outputLabel for="hardwareId" value="Hardware ID:" 
                                           rendered="#{!portalMB.baremetal}"/>
                            <p:watermark for="hardwareId" 
                                         value="#{portalMB.openstack
                                                  ?'Index of the Type of Instance'
                                                  :'AWS Type of Instance'}"
                                         rendered="#{!portalMB.baremetal}">
                                <p:inputText id="hardwareId" value="#{portalMB.hardwareId}"
                                             size="30" required="true" disabled="#{portalMB.baremetal}"
                                             rendered="#{!portalMB.baremetal}"
                                             title="Enter the hardware ID to query for your Dashboard"
                                             label="Missing hardware ID to query"
                                             />
                            </p:watermark>
                            <p:outputLabel for="imageId" value="Image ID:"
                                           rendered="#{!portalMB.baremetal}"/>
                            <p:watermark for="imageId" 
                                         value="#{portalMB.openstack
                                                  ?'Id of the image from OpenStack'
                                                  :'AWS use AMI-id/region'}"
                                         rendered="#{!portalMB.baremetal}">
                                <p:inputText id="imageId" value="#{portalMB.imageId}"
                                             size="30" required="true" disabled="#{portalMB.baremetal}"
                                             rendered="#{!portalMB.baremetal}"
                                             label="Missing imageID of the image to request"
                                             title="Enter the imageID of the image to use for the Dashboard"
                                             />
                            </p:watermark>

                            <h:outputLabel for="locationId" value="Location ID:"
                                           rendered="#{!portalMB.baremetal}"/>
                            <p:watermark for="locationId" value="#{portalMB.openstack
                                                                   ?'Name of the Project in OpenStack'
                                                                   :'Region id of AWS'}" rendered="#{!portalMB.baremetal}">
                                <p:inputText id="locationId" value="#{portalMB.locationId}" 
                                             disabled="#{portalMB.baremetal}"
                                             rendered="#{!portalMB.baremetal}"
                                             size="30" required="true"
                                             title="Enter the location where you want to deploy the Dashboard"
                                             label="Missing the location ID to query for the dashboard"
                                             />
                            </p:watermark>                          
                            <p:outputLabel for="loginUser" value="Login User:" />
                            <p:watermark for="loginUser" value="Login user to access the machine">
                                <p:inputText id="loginUser" value="#{portalMB.loginUser}" 
                                             required="#{portalMB.openstack or portalMB.baremetal}"
                                             size="30"
                                             title="Enter the login user to access the OS in the machine"
                                             label="Missing the login user required for the OS in the machine"/>
                            </p:watermark> 
                            <p:outputLabel for="authorizePublicKey" value="Authorize Public Key"/>
                            <p:inputTextarea id="authorizePublicKey" 
                                             value="#{portalMB.publicKey}" cols="28" 
                                             rows="11" required="true" 
                                             title="Enter a public key to authorize in the Dashboard"
                                             label="Missing public key to authorize"/>
                        </h:panelGrid>
                    </p:panel>
                    <br/>
                    <p:dialog header="Dashboard URL" widgetVar="dashboardDialog" resizable="false"
                              id="dashboardDig"  
                              showEffect="fade" hideEffect="explode" modal="true"  
                              >  
                        <h:panelGrid id="dashboardGridDetails" columns="2">
                            <p:outputLabel for="dashboardURL" value="URL to Dashboard:" />
                            <h:outputLink id="dashboardURL" value="#{portalMessageController.dashboardURL}" >
                                #{portalMessageController.dashboardURL}
                            </h:outputLink>
                            <p:outputLabel for="dashboardIP" value="Private IP:" />
                            <h:outputText id="dashboardIP" value="#{portalMessageController.dashboardPrivateIP}"/>
                        </h:panelGrid>
                    </p:dialog>  
                    <p:commandButton id="providerButton" value="Launch Instance" 
                                     action="#{cloudProviderController.launchInstance()}" 
                                     update=":instancesTab:msg1 dashboardDig"
                                     onclick="pollCreate.start()"
                                     oncomplete="pollCreate.stop(), dashboardDialog.show()" />
                    <p:blockUI block=":instancesTab" trigger="providerForm:providerButton">
                        <h:panelGrid id="blockContent" columns="2" >
                            <div class="windows8" >
                                <div class="wBall" id="wBall_1">
                                    <div class="wInnerBall">
                                    </div>
                                </div>
                                <div class="wBall" id="wBall_2">
                                    <div class="wInnerBall">
                                    </div>
                                </div>
                                <div class="wBall" id="wBall_3">
                                    <div class="wInnerBall">
                                    </div>
                                </div>
                                <div class="wBall" id="wBall_4">
                                    <div class="wInnerBall">
                                    </div>
                                </div>
                                <div class="wBall" id="wBall_5">
                                    <div class="wInnerBall">
                                    </div>
                                </div>
                            </div>
                            <h:outputLabel id="statusCreate" value="#{cloudProviderController.messages.showMessage()}" 
                                           style="white-space:nowrap;" >
                            </h:outputLabel>
                            <p:poll widgetVar="pollCreate" interval="3" autoStart="false" update="statusCreate" async="true" partialSubmit="true" process="@this"/>
                        </h:panelGrid>
                    </p:blockUI>
                </h:form>
            </div>
        </ui:composition>
    </h:body>
</html>


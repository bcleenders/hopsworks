<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
  <h:head>
    <title><ui:insert name="title">BioBankCloud LIMS</ui:insert></title>
    <link rel="stylesheet" type="text/css" href="#{resource['/css/layout.css']}" />
    <link rel="stylesheet" type="text/css" href="#{resource['/css/lims.css']}" />
    <link rel="stylesheet" type="text/css" href="#{resource['/css/studyPage.css']}" />
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"/>
  </h:head>
  <body>
    <ui:composition>
      <h:form id="testForm">
        <ui:repeat value="#{studyManagedBean.groupedMembers}" var="memGroup">
          <ui:repeat value="#{memGroup.members}" var="usr">
            <!-- encode -->
            <p:commandLink styleClass="ui-button fa fa-minus"  value="" rendered="#{studyManagedBean.renderComponentList() == 'Master' and not studyManagedBean.studyOwnedBy(usr.email)}" onclick="PF('removeDlg_${usr.email}').show()">
                                            <!--<p:confirm header="Removing a team member" message="Are you sure you want to remove #{usr.name} [#{usr.email}]?" icon="ui-icon-alert"/>-->
            </p:commandLink>
<!--                                                    <p:confirmDialog id="currentUser_master_${memGroupStat.index}_${usrStat.index}" global="true" severity="alert" showEffect="fade"> 
                <p:commandButton value="Yes" icon="ui-icon-check" styleClass="ui-confirmdialog-yes" type="submit" update=":tabStudyPage:teamForm"/>   
                <p:commandButton value="No"  icon="ui-icon-close" styleClass="ui-confirmdialog-no" type="button"/> 
            </p:confirmDialog>-->
            <p:dialog modal="true" draggable="false" resizable="false" widgetVar="removeDlga_${usr.email}" header="Remove user?" appendTo="@(body)" rendered="#{studyManagedBean.renderComponentList() == 'Master' and not studyManagedBean.studyOwnedBy(usr.email)}">
              <h:form>
                <h:outputText value="Are you sure you want to remove #{usr.name} [#{usr.email}]?"/>
                <p:commandButton value="Yes" icon="ui-icon-check" styleClass="ui-confirmdialog-yes" type="submit" ajax="true" process="@all" actionListener="#{studyManagedBean.test()}" oncomplete="PF('removeDlg_${usr.email}').hide()"/>
                <p:commandButton value="No" icon="ui-icon-close" styleClass="ui-confirmdialog-no" type="button" onclick="PF('removeDlg_${usr.email}').hide()"/>
              </h:form>
            </p:dialog>
          </ui:repeat>
        </ui:repeat>
      </h:form>

    </ui:composition>
  </body>
</html>

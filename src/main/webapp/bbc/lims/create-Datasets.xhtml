<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      >

    <ui:composition template="layout.xhtml">

        <ui:define name="title">
            BiobankCloud Lims
        </ui:define>
        <ui:define name="css">
            <link rel="stylesheet" type="text/css" href="#{resource['/css/bbc.css']}" />
        </ui:define>
        <ui:define name="scripts"/>

<!--        <ui:define name="leftmenu">
            <p:commandLink styleClass="sideMenuItem New" action="#{bbcController.showNewUserManagementDialog()}"/>
        </ui:define>-->


        


<ui:define name="content">

        <p:spacer width="1" height="10" />             
        <h:form id="header"> 
            <p:panel>
             <f:facet name="header">
                     <h:outputLabel value="Study" style="font-weight:bold"/>
                     <h:outputText value="(#{studyMB.allStudy})"/>
                     <p:commandButton value="New Study" icon="ui-icon-plusthick" onclick="dlgNewStudy.show()" action="#{studyMB.showNewStudyDialog()}" rendered="#{userMB.anyAdminUser}"/>
                </f:facet> 
           
                <p:tabView id="tabViewStudy" cache="false" dynamic="true">
                    <p:tab id="tab1" title="All">
                        <h:form id="showAllStudy">
                            <p:panel styleClass="BbcNewUserPanel" style="font-size:12px;width:600px">
                              <h:panelGrid columns="2">
                                  <p:dataList value="#{studyMB.studyList}" var="study">
                                      <p:commandLink>
                                          <h:outputText value="#{study.name} / #{study.trackStudyPK.datasetId}" style="font-size:14px"/>
                                      </p:commandLink>
                                  </p:dataList>
                              </h:panelGrid>
                            </p:panel>
                        </h:form>
                    </p:tab>

	<p:tab id="tab2" title="Personal"> 
		<h:form id="showPersonalStudy">
                            <p:panel styleClass="BbcNewUserPanel" style="font-size:12px;width:600px">
                              <h:panelGrid columns="2">
                                  <p:dataList value="#{studyMB.datasetList}" var="study">
                                      <p:commandLink>
                                          <h:outputText value="#{study.id} / #{study.owner}" style="font-size:14px"/>
                                      </p:commandLink>
                                  </p:dataList>
                              </h:panelGrid>
                            </p:panel>
                </h:form>
	</p:tab>

	<p:tab id="tab3" title="Joined">
		<h:panelGrid columns="2">
		
			<h:outputText id="tabJoined"/>
		</h:panelGrid>
	</p:tab>

   </p:tabView>
            </p:panel>      
  </h:form>
</ui:define>    
        
        
<ui:define name="dialogs">       
<!-- Dialog New Study-->
    <p:dialog modal="true" widgetVar="dlgNewStudy" header="Create New Study" draggable="true" closable="true" resizable="false">  

            <h:form id="formNewStudy" prependId="false">
               <p:messages autoUpdate="true"/>
                <h:panelGrid id="grid" columns="2" cellpadding="5">
                        <h:outputText value="Study Id:" style="white-space: nowrap"/>  
                        <p:inputText id="study" value="#{studyMB.study.trackStudyPK.id}" required="true" style="min-width: 150px">
                        </p:inputText>
                        
                        
<!--                        <h:outputText value="Dataset Id:" style="white-space: nowrap"/>  
                        <p:inputText id="dataset" value="#{studyMB.study.trackStudyPK.datasetId}" required="true" style="min-width: 150px">
                        </p:inputText>-->
                      
                        
                        <h:outputText value="Dataset:" />  
                        <p:selectOneMenu  id="id" required="true" value=""  style="min-width: 250px">                                
                            <f:selectItem itemLabel="Select dataset" noSelectionOption="true"/> 
                            <f:selectItems value="#{studyMB.datasetId}"/>  
                        </p:selectOneMenu> 
                        
                       
                        <h:outputText value="Study Name:" style="white-space: nowrap"/>  
                        <p:inputText id="name" value="#{studyMB.study.name}" required="true" style="min-width: 150px">
                        </p:inputText>
                      
                                             
                    </h:panelGrid>   
                     <p:spacer width="1" height="30" />   
                    <p:outputPanel style="float: right">                   
                       <p:spacer width="1" height="30" /> 
                       <p:commandButton id="save" value="Create" icon="ui-icon-plusthick" action="#{studyMB.createStudy()}" update="grid"/>                         
                    </p:outputPanel>
                      
                         
                </h:form>
        </p:dialog>
   <!-- End of Dialog New Study-->    
        
        
        
        
        
        
        
        
      </ui:define>
    </ui:composition>
</html>
                    
         
        
                               
                                    
                                
                                
                               
            
                            

            
            
     
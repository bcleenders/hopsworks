<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      >

    <ui:composition template="layout.xhtml">

        <ui:define name="title">
            BiobankCloud Lims
        </ui:define>
        <ui:define name="css">
            <link rel="stylesheet" type="text/css" href="#{resource['/css/bbc.css']}" />
        </ui:define>
        <ui:define name="scripts"/>

        <ui:define name="leftmenu">
<!--            <p:commandLink styleClass="sideMenuItem New" action="#{bbcController.showNewUserManagementDialog()}"/>-->
        </ui:define>


        


        <ui:define name="content">

            <h:form id="formNewUserManagement" prependId="false"> 
                    
                                   
                    <p:tabView id="tabViewNew">
                        <p:tab title="Show">
                             <h:panelGrid columns="2">  
                                    <div class="showStudy">
                                        <span class="author">
                                            Study <strong>  #{studyMB.studyName} </strong> 
                                        </span>
                                        <span class="info">was created by <strong><p:commandLink value="#{studyMB.creator}" action="#{userController.fetchUser()}">
                                                    <f:param name="name" value="#{userController.name}"/>
                                                    <f:param name="email" value="#{studyMB.creator}"/>
                                                    <f:param name="username" value="#{userController.username}"/>
                                          </p:commandLink></strong> </span>
                                        
                                    </div>
                                  
                               </h:panelGrid>
                       
                        </p:tab>
                        
                        <p:tab title="Team">
                                  <h3>Study Members (#{studyMB.NOfMembers})</h3>
                                  <p:spacer width="20" height="20" />
                                  <p:commandButton value="New Study Member" icon="ui-icon-plusthick" onclick="dlgNewStudyMember.show()" action="#{studyMB.showNewStudyMemberDialog()}" rendered="#{userMB.anyAdminUser}"/>
                                  <p:separator id="separator"/>
                                <h:panelGrid columns="2">  
                                    <div class="team_table"> 
                                      <div class="user_box">
                                            <h4>Members</h4>                        
                                      </div>                 
                                    </div>                     
                                  
                               </h:panelGrid>
                       
                        </p:tab>
                    </p:tabView>
                         
           </h:form>
            
        </ui:define>
        
        <ui:define name="dialogs">  
         <p:dialog modal="true" widgetVar="dlgNewStudyMember">  
        
             
             <h:form id="formNewStudyMember" prependId="false">
               <p:messages autoUpdate="true"/>
             
               <p:tab id="study" title="Study">

                    <p:panel header="New Member">
			
				<h:messages errorClass="error"/>
				
				
                                <div align="left">
                                            <p:outputLabel for="acName" value="Member :" style="font-size:14px"/>
                                            <p:autoComplete id="acName" value="#{userController.selectedUsername}" completeMethod="#{userController.completeUsername}" multiple="true"/>
                                            <br/>
                                            <hr/>
                                            <p:outputLabel for="acStudyname" value="Study :" style="font-size:14px"/>
                                            <p:autoComplete id="acStudyname" value="#{studyMB.studyMember.studyGroupMembersPK.studyname}" completeMethod="#{studyMB.studyList}"/>
                                </div>
                                <f:facet name="footer">
                                    <p:commandButton value="Create" icon="ui-icon-plusthick" actionListener="#{studyMB.addMembers()}"/>                                    
                                </f:facet>      
				
			</p:panel>
		</p:tab>
               
               
               
             </h:form>
             
             
         </p:dialog>
        
        
        
        
        </ui:define>
        
    </ui:composition>
</html>
                    
         
        
                               
                                    
                                
                                
                               
            
                            

            
            
     
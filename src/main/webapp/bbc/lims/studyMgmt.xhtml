<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      >

    <ui:composition template="layout.xhtml">

        <ui:define name="title">
            BiobankCloud Lims
        </ui:define>
        <ui:define name="css">
            <link rel="stylesheet" type="text/css" href="#{resource['/css/lims.css']}" />
        </ui:define>
        <ui:define name="scripts"/>

<!--        <ui:define name="leftmenu">
            <p:commandLink styleClass="sideMenuItem New" action="#{bbcController.showNewUserManagementDialog()}"/>
        </ui:define>-->


        


<ui:define name="content">

        <p:spacer width="1" height="10" />             
        <h:form id="header"> 
            <p:panel>
             <f:facet name="header">
                     <h:outputLabel value="Study" style="font-weight:bold"/>
                     <h:outputText value="(#{studyMB.allStudy})"/>
                     <p:commandButton value="New Study" icon="ui-icon-plusthick" onclick="dlgNewStudy.show()" action="#{studyMB.showNewStudyDialog()}" rendered="#{userMB.anyAdminUser}">
                      
                     </p:commandButton>
                </f:facet> 
           
                <p:tabView id="tabViewStudy" cache="false" dynamic="true">
                    <p:tab id="tab1" title="All">
                        <h:form id="showAllStudy">
                            <p:panel styleClass="BbcNewUserPanel" style="font-size:12px;width:600px">
                              <h:panelGrid columns="2">
                                  <p:dataList value="#{studyMB.studyList}" var="stdlist" styleClass="dataList">
                                      <div align="left">
                                          <p:commandLink action="#{studyMB.fetchStudy()}" value="#{stdlist.username} / #{stdlist.name}" style="font-size:16px">
                                              <f:param name="studyname" value="#{stdlist.name}"/>
                                              <f:param name="username" value="#{stdlist.username}"/>
                                          </p:commandLink>
                                      </div>
                                      
                                  </p:dataList>
                              </h:panelGrid>
                            </p:panel>
                        </h:form>
                    </p:tab>

	<p:tab id="tab2" title="Personal"> 
		<h:form id="showPersonalStudy">
                            <p:panel styleClass="BbcNewUserPanel" style="font-size:12px;width:600px">
                              <h:panelGrid columns="2">
                                  <p:dataList value="#{studyMB.personalStudy}" var="study" styleClass="dataList">
                                      <div align="left">
                                            <p:commandLink value="#{study.name}" style="font-size:16px"/>
                                      </div>
                                  </p:dataList>
                              </h:panelGrid>
                            </p:panel>
                </h:form>
	</p:tab>

	<p:tab id="tab3" title="Joined">
		<h:panelGrid columns="2">
		
                    <h:outputText id="tabJoined"/>
		</h:panelGrid>
	</p:tab>

   </p:tabView>
            </p:panel>      
  </h:form>
</ui:define>    
        
        
<ui:define name="dialogs">       
<!-- Dialog New Study-->
   <p:dialog modal="true" widgetVar="dlgNewStudy" header="Create New Study" draggable="true" closable="true" resizable="false">  

       <h:form id="formNewStudy" prependId="false">
               <p:messages autoUpdate="true"/>
               
               <p:growl id="growl" sticky="true" showDetail="true"/>

               <p:wizard flowListener="#{studyMB.onFlowProcess}" widgetVar="wiz" styleClass="wizard">
	
		<p:tab id="study" title="Study">

                    <p:panel header="Study Details">
			
				<h:messages errorClass="error"/>
				
				
					<div>
                                            <p:outputLabel for="study_name" style="font-size:16px">Study name is: </p:outputLabel>
                                            <h:inputText id="study_name" value="#{studyMB.study.name}" size="40"/>
                                                                   
                                        </div>
                                        
				
			</p:panel>
		</p:tab>
			
<!--		<p:tab id="users" title="Users">
			<p:panel header="Add Users">
			
				<h:messages errorClass="error"/>
				
				<h:panelGrid columns="2" columnClasses="label, value">
					
					
					
				</h:panelGrid>
			</p:panel>
		</p:tab>-->
<!--			
		<p:tab id="data" title="Data">
			<p:panel header="Select Dataset">
				
				<h:messages errorClass="error"/>
			
				<h:panelGrid columns="2" columnClasses="label, value">
					
					
				</h:panelGrid>
			</p:panel>
		</p:tab>-->
			
		<p:tab id="confirm" title="Confirmation">
			<p:panel header="Confirmation">
			
                            <h:panelGrid columns="2" id="confirmation">
                                
                                <h:outputText value="Study name: "/>
                                <h:outputText styleClass="outputLabel" value="#{studyMB.study.name}"/>
                                                                                                   
                            </h:panelGrid>
				
                            <p:commandButton value="Submit" icon="ui-icon-disk" update="growl" actionListener="#{studyMB.save}"/>
			
			</p:panel>
		</p:tab>
		
	</p:wizard>
</h:form>

                
        </p:dialog>
<!-- End of Dialog New Study    -->
        


    	
                        







        
        
        
        
        
        
      </ui:define>
    </ui:composition>
</html>
                    
         
        
                               
                                    
                                
                                
                               
            
                            

            
            
     